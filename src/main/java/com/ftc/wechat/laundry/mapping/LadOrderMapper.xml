<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ftc.wechat.laundry.dao.OrderMapper" >
  <resultMap id="BaseResultMap" type="com.ftc.wechat.laundry.bean.LadOrder" >
    <id column="order_id" property="orderId" jdbcType="INTEGER" />
    <result column="order_no" property="orderNo" jdbcType="VARCHAR" />
    <result column="order_datetime" property="orderDatetime" jdbcType="VARCHAR" />
    <result column="order_revorderid" property="orderRevorderid" jdbcType="INTEGER" />
    <result column="order_orderno" property="orderOrderno" jdbcType="VARCHAR" />
    <result column="order_amount" property="orderAmount" jdbcType="DOUBLE" />
    <result column="order_qty" property="orderQty" jdbcType="INTEGER" />
    <result column="order_finished" property="orderFinished" jdbcType="VARCHAR" />
    <result column="order_statusid" property="orderStatusid" jdbcType="INTEGER" />
    <result column="order_paytype" property="orderPaytype" jdbcType="INTEGER" />
    <association column="order_statusid" property="orderStatus" javaType="com.ftc.background.sys.bean.Status">
  		<id column="status_id" property="statusId" jdbcType="INTEGER" />
	    <result column="status_name" property="statusName" jdbcType="VARCHAR" />
	    <result column="status_code" property="statusCode" jdbcType="VARCHAR" />
  	</association>
  </resultMap>
  <resultMap id="serialResultMap" type="com.ftc.base.util.OrderNoUtil" >
    <result column="serial" property="serial" jdbcType="INTEGER" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select a.*,b.*
    from lad_order a
     LEFT JOIN sys_status b ON a.order_statusid = b.status_id
    where order_id = #{orderId,jdbcType=INTEGER}
  </select>
  <select id="selectByOrderStatus" resultMap="BaseResultMap" parameterType="com.ftc.wechat.laundry.bean.LadOrder" >
    select a.*,b.*
    from lad_order a
    LEFT JOIN sys_status b ON a.order_statusid = b.status_id
    WHERE 1 =1 
   <if test="statusCode != null and statusCode != ''">
		and b.status_code = #{statusCode,jdbcType=VARCHAR}
	</if>
	<if test="orderUserid != null" >
        and order_userid = #{orderUserid,jdbcType=INTEGER}
        and order_deleted is null
    </if>
  </select>
  <select id="selectSerial" resultMap="serialResultMap" >
   select 
    (count(1) + 1) as serial
    from lad_order
    where date_format(order_datetime,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d')
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from lad_order
    where order_id = #{orderId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.ftc.wechat.laundry.bean.LadOrder" >
    insert into lad_order (order_id, order_no, order_datetime, 
      order_revorderid, order_orderno, order_amount, 
      order_qty, order_finished, order_statusid,order_paytype
      )
    values (#{orderId,jdbcType=INTEGER}, #{orderNo,jdbcType=VARCHAR}, #{orderDatetime,jdbcType=VARCHAR}, 
      #{orderRevorderid,jdbcType=INTEGER}, #{orderOrderno,jdbcType=VARCHAR}, #{orderAmount,jdbcType=DOUBLE}, 
      #{orderQty,jdbcType=INTEGER}, #{orderFinished,jdbcType=VARCHAR}, #{orderStatusid,jdbcType=INTEGER},
      #{orderPaytype,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.ftc.wechat.laundry.bean.LadOrder" >
    insert into lad_order
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="orderId != null" >
        order_id,
      </if>
      <if test="orderNo != null" >
        order_no,
      </if>
      <if test="orderDatetime != null" >
        order_datetime,
      </if>
      <if test="orderRevorderid != null" >
        order_revorderid,
      </if>
      <if test="orderOrderno != null" >
        order_orderno,
      </if>
      <if test="orderAmount != null" >
        order_amount,
      </if>
      <if test="orderQty != null" >
        order_qty,
      </if>
      <if test="orderFinished != null" >
        order_finished,
      </if>
      <if test="orderStatusid != null" >
        order_statusid,
      </if>
       <if test="orderPaytype != null" >
        order_paytype,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="orderId != null" >
        #{orderId,jdbcType=INTEGER},
      </if>
      <if test="orderNo != null" >
        #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="orderDatetime != null" >
        #{orderDatetime,jdbcType=VARCHAR},
      </if>
      <if test="orderRevorderid != null" >
        #{orderRevorderid,jdbcType=INTEGER},
      </if>
      <if test="orderOrderno != null" >
        #{orderOrderno,jdbcType=VARCHAR},
      </if>
      <if test="orderAmount != null" >
        #{orderAmount,jdbcType=DOUBLE},
      </if>
      <if test="orderQty != null" >
        #{orderQty,jdbcType=INTEGER},
      </if>
      <if test="orderFinished != null" >
        #{orderFinished,jdbcType=VARCHAR},
      </if>
      <if test="orderStatusid != null" >
        #{orderStatusid,jdbcType=INTEGER},
      </if>
      <if test="orderPaytype != null" >
        #{orderPaytype,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ftc.wechat.laundry.bean.LadOrder" >
    update lad_order
    <set >
      <if test="orderNo != null" >
        order_no = #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="orderDatetime != null" >
        order_datetime = #{orderDatetime,jdbcType=VARCHAR},
      </if>
      <if test="orderRevorderid != null" >
        order_revorderid = #{orderRevorderid,jdbcType=INTEGER},
      </if>
      <if test="orderOrderno != null" >
        order_orderno = #{orderOrderno,jdbcType=VARCHAR},
      </if>
      <if test="orderAmount != null" >
        order_amount = #{orderAmount,jdbcType=DOUBLE},
      </if>
      <if test="orderQty != null" >
        order_qty = #{orderQty,jdbcType=INTEGER},
      </if>
      <if test="orderFinished != null" >
        order_finished = #{orderFinished,jdbcType=VARCHAR},
      </if>
      <if test="orderStatusid != null" >
        order_statusid = #{orderStatusid,jdbcType=INTEGER},
      </if>
      <if test="orderPaytype != null" >
        order_paytype = #{orderPaytype,jdbcType=INTEGER},
      </if>
    </set>
    where order_id = #{orderId,jdbcType=INTEGER}
  </update>
  <update id="updateByRevOrderIdSelective" parameterType="com.ftc.wechat.laundry.bean.LadOrder" >
    update lad_order
    <set >
      <if test="orderNo != null" >
        order_no = #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="orderDatetime != null" >
        order_datetime = #{orderDatetime,jdbcType=VARCHAR},
      </if>
      <if test="orderOrderno != null" >
        order_orderno = #{orderOrderno,jdbcType=VARCHAR},
      </if>
      <if test="orderAmount != null" >
        order_amount = #{orderAmount,jdbcType=DOUBLE},
      </if>
      <if test="orderQty != null" >
        order_qty = #{orderQty,jdbcType=INTEGER},
      </if>
      <if test="orderFinished != null" >
        order_finished = #{orderFinished,jdbcType=VARCHAR},
      </if>
      <if test="orderStatusid != null" >
        order_statusid = #{orderStatusid,jdbcType=INTEGER},
      </if>
      <if test="orderPaytype != null" >
        order_paytype = #{orderPaytype,jdbcType=INTEGER},
      </if>
    </set>
    where order_revorderid = #{orderRevorderid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ftc.wechat.laundry.bean.LadOrder" >
    update lad_order
    set order_no = #{orderNo,jdbcType=VARCHAR},
      order_datetime = #{orderDatetime,jdbcType=VARCHAR},
      order_revorderid = #{orderRevorderid,jdbcType=INTEGER},
      order_orderno = #{orderOrderno,jdbcType=VARCHAR},
      order_amount = #{orderAmount,jdbcType=DOUBLE},
      order_qty = #{orderQty,jdbcType=INTEGER},
      order_finished = #{orderFinished,jdbcType=VARCHAR},
      order_statusid = #{orderStatusid,jdbcType=INTEGER},
      order_paytype = #{orderPaytype,jdbcType=INTEGER}
    where order_id = #{orderId,jdbcType=INTEGER}
  </update>
</mapper>